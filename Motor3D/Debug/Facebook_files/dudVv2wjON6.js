/*!CK:506226837!*//*1400470666,178158661*/

if (self.CavalryLogger) { CavalryLogger.start_js(["RXVke"]); }

__d("XUITypeaheadTextOnlyView.react",["ReactPropTypes","React","TypeaheadViewItem","cx"],function(a,b,c,d,e,f,g,h,i,j){var k=h.createClass({displayName:'XUITypeaheadTextOnlyViewItem',mixins:[i.Mixin],propTypes:i.propTypes,render:function(){var m=this.props.entry,n=(("_599m")+(this.props.highlighted?' '+"_599n":''));return (h.DOM.li({key:m.getUniqueID(),className:n,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},h.DOM.div({className:"_599p"},m.getTitle())));}}),l=h.createClass({displayName:'XUITypeaheadTextOnlyView',propTypes:{highlightedEntry:g.object,entries:g.array.isRequired,onSelect:g.func.isRequired,onHighlight:g.func.isRequired,onRenderHighlight:g.func},_renderItem:function(m){var n=m===this.props.highlightedEntry;return (k({entry:m,highlighted:n,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var m=(("_599r")+(!this.props.entries.length?' '+"_599s":''));return (h.DOM.ul({className:m},this.props.entries.map(this._renderItem)));}});e.exports=l;});
__d("XUITypeaheadView.react",["BackgroundImage.react","ImageBlock.react","ReactPropTypes","React","TypeaheadViewItem","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=j.createClass({displayName:'XUITypeaheadViewItem',mixins:[k.Mixin],propTypes:k.propTypes,render:function(){var o=this.props.entry,p=o.getSubtitle().split(' \u00b7 ')[0],q=p?j.DOM.div({className:"_599q"},p):null,r=o.getPhoto()?g({width:32,height:32,backgroundSize:"cover",src:o.getPhoto()}):j.DOM.span(null),s=(("_599m")+(!q?' '+"_5mne":'')+(this.props.highlighted?' '+"_599n":''));return (j.DOM.li({className:s,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},h({spacing:"medium"},r,j.DOM.div(null,j.DOM.div({className:"_599p"},o.getTitle()),q))));}}),n=j.createClass({displayName:'XUITypeaheadView',propTypes:{highlightedEntry:i.object,entries:i.array.isRequired,onSelect:i.func.isRequired,onHighlight:i.func,onRenderHighlight:i.func},_renderItem:function(o){var p=o===this.props.highlightedEntry;return (m({key:o.getUniqueID(),entry:o,highlighted:p,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var o=(("_599r")+(!this.props.entries.length?' '+"_599s":''));return (j.DOM.ul({className:o},this.props.entries.map(this._renderItem)));}});e.exports=n;});
__d("XUITypeahead.react",["AbstractTypeahead.react","ReactPropTypes","React","XUITypeaheadTextOnlyView.react","XUITypeaheadView.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={ViewRenderer:k,useLayer:true},n={ViewRenderer:k,useLayer:false},o={ViewRenderer:j,useLayer:true},p=i.createClass({displayName:'XUITypeahead',propTypes:{autoHighlight:h.bool,maxEntries:h.number,onBlur:h.func,onChange:h.func.isRequired,onFocus:h.func,onSelectAttempt:h.func.isRequired,placeholder:h.string,queryString:h.string,searchSource:h.object.isRequired,searchSourceOptions:h.object,selectOnBlur:h.bool,showEntriesOnFocus:h.bool,focusedOnInit:h.bool,tallInput:h.bool,viewStyle:h.oneOf(['textonly','rich','richNoLayer'])},getDefaultProps:function(){return {viewStyle:'rich'};},componentWillMount:function(){if(this.props.maxEntries)m.maxEntries=n.maxEntries=o.maxEntries=this.props.maxEntries;},focusInput:function(){this.refs.typeahead.focusInput();},render:function(){var q=(("_55r1")+(!!this.props.tallInput?' '+"_55r2":'')),r=null;if(this.props.viewStyle=='rich'){r=m;}else if(this.props.viewStyle=='richNoLayer'){r=n;}else r=o;return this.transferPropsTo(g({inputClassName:q,ref:"typeahead",presenter:r,excludedEntries:this.props.excludedEntries}));}});e.exports=p;});
__d("requiredIfPropIsTruthy",["invariant"],function(a,b,c,d,e,f,g){function h(i,j){return function(k,l,m){if(!k[i])return;g(k[l]!==undefined);j(k,l,m);};}e.exports=h;});
__d("TimelineChecklistMixin",["OrderedMap","React","endsWith","requestAnimationFrame","requiredIfPropIsTruthy"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.PropTypes,m={propTypes:{baseName:l.string.isRequired,fetchOnScroll:l.bool,imageSize:l.number,multiSelect:l.bool,onChange:l.func,options:l.array,overflow:l.oneOf(['scroll','show']),pagerEndpoint:k('showPager',l.string),pagerPlaceholder:k('showPager',l.string),showPager:l.bool},methods:{addOption:function(n,o,p,q,r,s){this.props.multiSelect||this._uncheckAllOptions();this._insertSingleOption.apply(this,[false].concat(Array.prototype.slice.call(arguments)));},replaceWithSingleOption:function(n,o,p,q,r,s){this._insertSingleOption.apply(this,[true].concat(Array.prototype.slice.call(arguments)));this._optionsWereReplaced&&this._optionsWereReplaced();},clearSelection:function(){this._uncheckAllOptions();},getSelection:function(){var n={};this.state.options.forEach(function(o,p){if(o.checked)n[p]=o;});return n;},getInitialState:function(){return {options:g.fromArray(this.props.options,function(n){return n.id;}),showPager:this.props.showPager};},shouldComponentUpdate:function(n,o){return (this.state.options!==o.options||this.state.showPager!==o.showPager);},_getOptionNameOrFallback:function(n){var o=n.name||this.props.baseName;if(this.props.multiSelect&&!i(o,'[]'))o+='['+n.id+']';return o;},_changeHandler:function(event){if(event.target.checked&&!this.props.multiSelect)this._uncheckAllOptions();this.setState({options:this.state.options.map(function(n,o){if(o===event.target.value)n.checked=event.target.checked;return n;})});this.props.onChange&&this.props.onChange();},_exhaustionHandler:function(){this.setState({showPager:false});},_fetchHandler:function(n){if(!n.options.length){this._exhaustionHandler();return;}this._insertOptions(g.fromArray(n.options,function(o){return o.id;}));if(this.refs.container.updateShadows)j(this.refs.container.updateShadows);},_insertSingleOption:function(n,o,p,q,r,s,t){var u=g.fromArray([{id:o,title:p,subtitle:q,image:r,checked:!!s,name:t}],function(v){return v.id;});this._insertOptions(u,n);if(this._optionWasAdded)j(function(){return this._optionWasAdded(o);}.bind(this));},_insertOptions:function(n,o){this.setState({options:o?n:this.state.options.merge(n)});},_uncheckAllOptions:function(){this.setState({options:this.state.options.map(function(n){n.checked=false;return n;})});}}};e.exports=m;});
__d("ShadowedScrollableArea.react",["React","Vector","cx","throttle"],function(a,b,c,d,e,f,g,h,i,j){var k=500,l=g.createClass({displayName:'ShadowedScrollableArea',propTypes:{maxHeight:g.PropTypes.number.isRequired},getInitialState:function(){return {showBottom:false,showTop:false};},render:function(){var m=this.transferPropsTo(g.DOM.div({className:"scrollable",ref:"area",style:{maxHeight:this.props.maxHeight}},this.props.children)),n=(("_2yy7")+(this.state.showBottom?' '+"_2yy8":'')+(this.state.showTop?' '+"_2yy9":''));return (g.DOM.div({className:n,onScroll:this._scrollHandler},m));},componentWillUnmount:function(){this.throttled=null;},getArea:function(){return this.refs.area.getDOMNode();},getScrollPosition:function(){var m=this.refs.area.getDOMNode(),n=this._getAreaDimensions().height;return {bottom:m.scrollHeight-m.scrollTop-n,top:m.scrollTop};},updateShadows:function(){if(this._hasOverflow()){var m=this.getScrollPosition();this.setState({showBottom:m.bottom!==0,showTop:m.top!==0});}else if(this.state.showBottom||this.state.showTop)this.setState({showBottom:false,showTop:false});},_getAreaDimensions:function(){var m=this.refs.area.getDOMNode();return {height:h.getElementDimensions(m).y,scrollHeight:m.scrollHeight};},_hasOverflow:function(){var m=this._getAreaDimensions();return m.scrollHeight>m.height;},_scrollHandler:function(event){if(!this.throttled)this.throttled=j(this.updateShadows,k,this);this.throttled();}});e.exports=l;});
__d("TimelineChecklistScrollMixin",["Animation","Style","highlight","startsWith","throttle"],function(a,b,c,d,e,f,g,h,i,j,k){var l=400,m=100,n=250,o={componentWillUnmount:function(){this.throttled=null;},scrollToBottom:function(){this._scrollTo(this._getScrollArea().scrollHeight);},scrollToOption:function(q){if(!this.state.options.has(q))return;var r=this._getScrollArea(),s=this.refs[q].getDOMNode(),t=s.offsetTop+s.offsetHeight,u=r.scrollTop+r.offsetHeight,v=function(){var w=this._getBackgroundColor();w&&i(s,null,w);}.bind(this);if(s.offsetTop<r.scrollTop){this._scrollTo(s.offsetTop-1,v);}else if(t>u){this._scrollTo(t-r.offsetHeight,v);}else{v();return;}},_getScrollArea:function(){return this.refs.container.getArea();},_getBackgroundColor:function(){var q=this._getScrollArea();while(q){var r=h.get(q,'backgroundColor');if(!p(r))return r;q=q.parentElement;}return null;},_maybeFetchMoreOptions:function(){if(this.props.fetchOnScroll&&this.state.showPager&&this.refs.container.getScrollPosition().bottom<l)this.refs.pager.fetchMore();},_scrollHandler:function(){if(!this.throttled)this.throttled=k(this._maybeFetchMoreOptions,n,this);this.throttled();},_scrollTo:function(q,r){new g(this._getScrollArea()).to('scrollTop',q).ease(g.ease.end).duration(m).ondone(function(){r&&r();}).go();}};function p(q){if(!j(q,'rgba'))return false;var r=q.split(',');return r.length===4&&parseFloat(r[3])===0;}e.exports=o;});
__d("TimelineChecklistItem.react",["ReactPropTypes","React","cx","invariant","joinClasses"],function(a,b,c,d,e,f,g,h,i,j,k){var l=h.createClass({displayName:'TimelineChecklistItem',propTypes:{context:g.oneOf(['block','inline']),paddingLeft:g.oneOf(['none','small','normal']),paddingRight:g.oneOf(['none','small','normal'])},getDefaultProps:function(){return {context:'block',paddingLeft:'normal',paddingRight:'normal'};},render:function(){j(Array.isArray(this.props.children)&&(this.props.children.length===2||this.props.children.length===3));var m,n,o;if(this.props.children.length===3){m=this.props.children[0];n=this.props.children[1];o=this.props.children[2];}else{m=null;n=this.props.children[0];o=this.props.children[1];}var p=m||n;p.props.className=k(p.props.className,"_14ku");if(m)m.props.className=k(m.props.className,"_5jou");n.props.className=k(n.props.className,"_5jov");o.props.className=k(o.props.className,"_14kv");var q=[m,n,o],r=this.props.context==='block'?h.DOM.div(null,q):h.DOM.span(null,q),s=this.props.paddingLeft,t=this.props.paddingRight;r.props.className=(("_5j7e")+(s==='none'?' '+"_14kw":'')+(s==='small'?' '+"_14kx":'')+(t==='none'?' '+"_14ky":'')+(t==='small'?' '+"_14kz":''));return this.transferPropsTo(r);}});e.exports=l;});
__d("TimelineChecklistPager.react",["AsyncRequest","ReactPropTypes","React","XUIText.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k){var l=i.createClass({displayName:'TimelineChecklistPager',propTypes:{endpoint:h.string.isRequired,onExhaustion:h.func.isRequired,onFetch:h.func,placeholder:h.string.isRequired},fetchMore:function(){if(this.state.loading||!this.state.endpoint)return;this.setState({loading:true});(new g()).setURI(this.state.endpoint).setHandler(this._fetchHandler).send();},getInitialState:function(){return {endpoint:this.props.endpoint,loading:false};},render:function(){var m=(("_5ueb")+(this.state.loading?' '+"_5ued":''));return (i.DOM.div({className:m,onClick:this._clickHandler},j({size:"small",weight:"bold"},this.props.placeholder),i.DOM.div({className:"_5uec"})));},_clickHandler:function(event){this.fetchMore();},_fetchHandler:function(m){var n=m.getPayload();this.setState({endpoint:n.endpoint,loading:false});this.props.onFetch&&this.props.onFetch(n);!n.endpoint&&this.props.onExhaustion();}});e.exports=l;});
__d("TimelineChecklist.react",["React","TimelineChecklistMixin","TimelineChecklistScrollMixin","Image.react","ShadowedScrollableArea.react","TimelineChecklistItem.react","TimelineChecklistPager.react","XUIText.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=248,q=32,r=g.createClass({displayName:'TimelineChecklist',mixins:[h.methods,i],propTypes:h.propTypes,getDefaultProps:function(){return {overflow:'show',imageSize:q};},render:function(){var s=[];this.state.options.forEach(function(v,w){var x=null;if(v.image)x=g.DOM.span(null,j({alt:v.title,height:this.props.imageSize,src:v.image,width:this.props.imageSize}));var y=null;if(v.subtitle)y=g.DOM.span({className:"_49ua"},v.subtitle);var z=(("_49ub")+(v.checked?' '+"_49uc":'')+(v.focused?' '+"_49ud":''));s.push(g.DOM.label({className:z,key:w,ref:w},l({context:"inline",paddingLeft:this.props.paddingLeft,paddingRight:this.props.paddingRight},x,g.DOM.span(null,n({className:"_49ue",size:"small",weight:"bold"},v.title),y),g.DOM.span({className:"_49uf"},g.DOM.span({className:"_49ug"}),g.DOM.input({checked:v.checked,className:"_49uh",name:this._getOptionNameOrFallback(v),onBlur:this._blurHandler,onChange:this._changeHandler,onFocus:this._focusHandler,type:"checkbox",value:w})))));},this);var t=null;if(this.state.showPager)t=m({endpoint:this.props.pagerEndpoint,onExhaustion:this._exhaustionHandler,onFetch:this._fetchHandler,placeholder:this.props.pagerPlaceholder,ref:"pager"});var u=g.DOM.fieldset({className:"_49uj"},s,t);if(this.props.overflow==='scroll')return (k({maxHeight:p,onScroll:this._scrollHandler,ref:"container"},u));return u;},_blurHandler:function(event){this.setState({options:this.state.options.map(function(s,t){if(t===event.target.value)s.focused=false;return s;})});},_focusHandler:function(event){this.setState({options:this.state.options.map(function(s,t){s.focused=t===event.target.value;return s;})});}});e.exports=r;});
__d("TimelineSingleTypeahead.react",["DOM","ReactPropTypes","React","CloseButton.react","XUITypeahead.react","csx","cx","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=i.createClass({displayName:'TimelineSingleTypeahead',propTypes:{excludedEntries:h.object,onBlur:h.func,onChange:h.func,onFocus:h.func,onSelectAttempt:h.func,placeholder:h.string,queryName:h.string,requireSelection:h.bool,searchSource:h.object.isRequired,selectedEntry:h.object,selectionName:h.string,selectOnBlur:h.bool,showEntriesOnFocus:h.bool,tallInput:h.bool},getDefaultProps:function(){return {requireSelection:false,selectedEntry:null,selectionName:'selected_id',queryName:'query'};},componentDidUpdate:function(){var p=this._getTextInputNode(),q=p.scrollWidth>p.clientWidth;if(this.state.useMask!==q)this.setState({useMask:q});},getInitialState:function(){return {queryString:'',selectedEntry:this.props.selectedEntry,useMask:false};},render:function(){var p=this.state.selectedEntry,q=this.state.queryString,r=null;if(this.state.useMask)r=i.DOM.div({className:"_5rrw"});var s=null;if(p)s=j({'aria-label':n._("Eliminar {item}",{item:p.getTitle()}),className:"_5rrv",onClick:this._clearButtonClickHandler,size:"small"});var t=null;if(p){t=i.DOM.input({name:this.props.selectionName,type:"hidden",value:p.getUniqueID()});}else if(q)t=i.DOM.input({name:this.props.queryName,type:"hidden",value:q});var u=(("_5rru")+(this.props.tallInput?' '+"_5rrx":'')+(!!p?' '+"_5rry":''));return (i.DOM.div({className:u},k({excludedEntries:this.props.excludedEntries,onBlur:this._blurHandler,onChange:this._changeHandler,onFocus:this.props.onFocus,onSelectAttempt:this._selectHandler,placeholder:this.props.placeholder,queryString:p?p.getTitle():q,ref:"typeahead",selectOnBlur:this.props.selectOnBlur,searchSource:this.props.searchSource,showEntriesOnFocus:this.props.showEntriesOnFocus,tallInput:this.props.tallInput}),r,s,t));},clearSelection:function(){this.setState({queryString:'',selectedEntry:null});},_blurHandler:function(){if(this.props.requireSelection&&!this.state.selectedEntry)this.clearSelection();},_changeHandler:function(event){this.setState({queryString:event.target.value,selectedEntry:null});this.props.onChange&&this.props.onChange(event);},_selectHandler:function(p){this.setState({selectedEntry:p});this.props.onSelectAttempt&&this.props.onSelectAttempt(p);},_clearButtonClickHandler:function(event){this.clearSelection();var p=this._getTextInputNode();setTimeout(p.focus.bind(p),0);},_getTextInputNode:function(){return g.find(this.refs.typeahead.getDOMNode(),"._58al");}});e.exports=o;});
__d("TimelineTypeaheadContainer.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'TimelineTypeaheadContainer',render:function(){return (g.DOM.div({className:"_5w1b"},this.props.children));}});e.exports=i;});
__d("TimelineTypeaheadChecklist.react",["React","TimelineChecklist.react","TimelineSingleTypeahead.react","TimelineTypeaheadContainer.react","XUITypeahead.react"],function(a,b,c,d,e,f,g,h,i,j,k){var l=g.PropTypes,m=g.createClass({displayName:'TimelineTypeaheadChecklist',propTypes:{excludedEntries:l.object,placeholder:l.string.isRequired,requireSelection:l.bool,searchSource:l.object.isRequired,typeaheadName:l.string,queryName:function(n,o,p){if(!n.multiSelect&&!n[o])return new Error(("Must supply a query name to "+p+" for ")+("single-selection mode."));}},getDefaultProps:function(){return {overflow:'scroll'};},getInitialState:function(){return {queryString:''};},render:function(){var n=null;if(this.props.multiSelect){n=k({excludedEntries:this.props.excludedEntries,onBlur:this._typeaheadBlurHandler,onChange:this._typeaheadChangeHandler,queryString:this.state.queryString});}else n=i({requireSelection:this.props.requireSelection,selectionName:this.props.typeaheadName,queryName:this.props.queryName});n.props.onSelectAttempt=this._selectHandler;n.props.placeholder=this.props.placeholder;n.props.ref='typeahead';n.props.searchSource=this.props.searchSource;var o=this.transferPropsTo(h({onChange:this._checklistChangeHandler,ref:"checklist"}));return (g.DOM.div(null,o,j(null,n)));},_checklistChangeHandler:function(){this.props.multiSelect||this.refs.typeahead.clearSelection();},_selectHandler:function(n){if(!n)return;if(!this.props.multiSelect){this.refs.checklist.clearSelection();return;}this.refs.checklist.addOption(n.getUniqueID(),n.getTitle(),n.getSubtitle(),n.getPhoto(),true,this.props.typeaheadName);this.setState({queryString:''});setTimeout(function(){this.refs.checklist.scrollToOption(n.getUniqueID());}.bind(this),0);},_typeaheadBlurHandler:function(){this.props.requireSelection&&this.setState({queryString:''});},_typeaheadChangeHandler:function(event){this.setState({queryString:event.target.value});}});e.exports=m;});